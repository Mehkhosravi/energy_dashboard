{% extends "base.html" %}

{% block title %}Energy Dashboard{% endblock %}

{% block content %}
<section class="py-10">
  <h1 class="text-3xl font-bold mb-6 mt-20 text-center">Energy Dashboard</h1>

  <!-- LEVEL SELECTOR -->
  <div class="mb-4 max-w-4xl mx-auto">
    <label for="levelSelect" class="block text-sm font-medium mb-1">Select Level:</label>
    <select id="levelSelect" class="w-full p-2 border rounded">
      <option value="">-- Choose Level --</option>
      <option value="region">Region</option>
      <option value="province">Province</option>
      <option value="comune">Municipality</option>
    </select>
  </div>

  <!-- DYNAMIC NAME SELECTOR -->
  <div class="mb-6 max-w-4xl mx-auto">
    <label for="areaSelect" class="block text-sm font-medium mb-1">Select Area:</label>
    <select id="areaSelect" class="w-full p-2 border rounded" >
      <option value="">-- Choose --</option>
    </select>
  </div>


  <!-- Map Section -->
  <div id="map" class="w-full h-[500px] rounded-xl border my-6"></div>

  {% include "partials/chart_controls.html" %}
  <!-- Charts Section -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto">
    <!-- Chart 1 -->
    <div class="bg-white rounded-xl shadow-md p-4">
      <h2 class="text-lg font-semibold mb-2">Energy Production vs Consumption</h2>
      <canvas id="chartProductionConsumption"></canvas>
    </div>

    <!-- Chart 2 -->
    <div class="bg-white rounded-xl shadow-md p-4">
      <h2 class="text-lg font-semibold mb-2">Self-Sufficiency Over Time</h2>
      <canvas id="chartSelfSufficiency"></canvas>
    </div>
  </div>
</section>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/chart_controls.js') }}"></script>
<script src="{{ url_for('static', filename='js/dashboard_map.js') }}"></script>
{% endblock %}
